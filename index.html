<!doctype html>
<html lang = 'en'>
<head>
<meta charset='UTF-8'>
<meta name="viewport"
	  content = "width=device_width, user_scalable=no, initial_scale=1.0, maximum_scale=1.0, minimum_scale=1.0">
<meta http-equip = "X-UA-Compatible" content = "ie=edge">
<title>Page</title>
<style>
body{
	background-color: var(--tg-theme-bg-color);
}
#main{
	width: 300px;
	height: 300px;
	background-color: var(--tg-theme-bg-color);
}
#buy{
	background-color = yellow;
}
#buy:hover{
	background-color = dark yellow;
}
#form{
	display: none;
	background-color: var(--tg-theme-bg-color);
}
</style>
</head>
<body>

<div id='main'>
<h3>Online shop</h3>
<p>pizza buy</p>
<button id="buy">BUY</button>
</div>

<form id="form">
	
<input id="login"></input><br />
<input id="phone"></input><br />
<input id="pass"></input><br />
<button id="order">Order</button>

</form>


<script src="https://telegram.org/js/telegram-web-app.js?59">
</script>
<script>
let tg = window.Telegram.WebApp;
let buy = document.getElementById('buy');
let order = document.getElementById('order');

tg.expand()

buy.addEventListener('click', () => {
	getElementById('main').style.display = "none";
	getElementById('form').style.display = "block";
	getElementById('login').value = tg.initDataUnsafe.first_name
});

order.addEventListener('click', () => {
	login = getElementById('login').value
	phone = getElementById('phone').value
	pass = getElementById('pass').value
	if (login.length < 4) {
		getElementById('login').value = "Uncorrect login"
		return;
	}
	if (phone.length < 3) {
		getElementById('phone').value = "Uncorrect phone"
		return;
	}
	if (pass.length < 5) {
		getElementById('pass').value = 'Uncorrect password'
		return;
	}

	data = {
		login: login,
		phone: phone,
		password: pass
	}

	tg.sendData(JSON.stringify(data))
	tg.close()

});
</script>
</body>

